!function(){window.tokyo=window.tokyo||{},tokyo.header3d={};var a=tokyo.header3d,b=1024;a.el=document.querySelector(".tokyo-pageHeader__logo"),a.width=Math.max(b,window.innerWidth),a.height=250,a.needUpdate=!1,a.defaultCameraPosition=new THREE.Vector3(0,2,20),a.init=function(){var b,c;a.scene=new THREE.Scene,a.scene.fog=new THREE.FogExp2(1118481,.05),a.camera=new THREE.PerspectiveCamera(40,a.width/a.height,1,100),a.camera.position=a.defaultCameraPosition.clone(),a.renderer=new THREE.WebGLRenderer({antialias:!0}),a.renderer.setSize(a.width,a.height),a.renderer.setClearColor(1118481,1),a.renderer.shadowMapEnabled=!0,a.renderer.shadowMapSoft=!0,a.el.removeChild(a.el.querySelector("img")),a.el.appendChild(a.renderer.domElement),b=new THREE.AmbientLight(6710886),a.scene.add(b),c=new THREE.DirectionalLight(16777215),c.position.set(0,10,20),c.target.position.set(0,0,0),c.castShadow=!0,c.shadowMapWidth=512,c.shadowMapHeight=512,c.shadowCameraNear=1,c.shadowCameraFar=30,c.shadowCameraLeft=-12,c.shadowCameraRight=12,c.shadowCameraTop=8,c.shadowCameraBottom=-8,c.shadowDarkness=.3,a.scene.add(c),window.addEventListener("scroll",function(){var b=window.pageYOffset;a.height<b||(a.camera.position.y=a.defaultCameraPosition.y-b/150,a.needUpdate=!0)}),window.addEventListener("mousemove",function(b){var c=b.clientX/a.width*2-1;a.camera.position.x=3*c,a.needUpdate=!0})},a.renderLoop=function(){requestAnimationFrame(a.renderLoop),a.checkWindowConditions(),!a.needUpdate||a.height<window.pageYOffset||(a.needUpdate=!1,a.renderer.render(a.scene,a.camera))},a.checkWindowConditions=function(){a.width!=window.innerWidth&&(a.width=Math.max(b,window.innerWidth),a.renderer.setSize(a.width,a.height),a.camera.aspect=a.width/a.height,a.camera.updateProjectionMatrix(),a.needUpdate=!0)},a.Karesansui=function(){THREE.EventDispatcher.prototype.apply(this);var b=this,c=new THREE.JSONLoader;c.load("./assets/models/karesansui/karesansui.js",function(c,d){d.forEach(function(b){b.map&&b.map.addEventListener("update",function(){a.needUpdate=!0})}),b.mesh=new THREE.Mesh(c,new THREE.MeshFaceMaterial(d)),b.mesh.traverse(function(a){a.castShadow=!1,a.receiveShadow=!0}),a.scene.add(b.mesh),a.needUpdate=!0})},a.Logo=function(){THREE.EventDispatcher.prototype.apply(this);var b=this,c=new THREE.JSONLoader;c.load("./assets/models/logo/webgl.js",function(c,d){d[0]=new THREE.MeshPhongMaterial({color:11075584,specular:16777215,emissive:0,shininess:100,ambient:0}),b.mesh=new THREE.Mesh(c,new THREE.MeshFaceMaterial(d)),b.mesh.traverse(function(a){a.castShadow=!0,a.receiveShadow=!1}),b.mesh.rotation.x=THREE.Math.degToRad(90),b.mesh.scale.set(3,3,3),b.mesh.position.set(-4,1.5,12),a.scene.add(b.mesh),a.needUpdate=!0})},a.Text=function(b){THREE.EventDispatcher.prototype.apply(this);var c,d,e,f,g,b=b,h=.5,i=0,j=new THREE.Geometry,k=[];for(c=0,d=b.length;d>c;c++){g=new THREE.TextGeometry(b[c],{size:h,height:.1*h,curveSegments:4,font:"gentilis",weight:"bold",style:"normal",bevelThickness:.05*h,bevelSize:.025*h,bevelEnabled:!0,material:0,extrudeMaterial:1});for(var e=0,f=g.vertices.length;f>e;e++)g.vertices[e].y+=i;g.computeBoundingBox(),g.computeVertexNormals(),THREE.GeometryUtils.merge(j,g),k.push(new THREE.MeshPhongMaterial({color:13421772,specular:16777215,emissive:0,shininess:100,ambient:0,shading:THREE.FlatShading})),k.push(new THREE.MeshPhongMaterial({color:13421772,specular:16777215,emissive:0,shininess:100,ambient:0,shading:THREE.SmoothShading})),i+=g.boundingBox.max.y}j.computeBoundingBox(),j.computeVertexNormals(),this.mesh=new THREE.Mesh(j,new THREE.MeshFaceMaterial(k)),this.mesh.traverse(function(a){a.castShadow=!0,a.receiveShadow=!1}),this.mesh.position.y=-g.boundingBox.max.y/2,this.mesh.scale.set(3,3,3),this.mesh.position.set(0,.2,12),a.scene.add(this.mesh),a.needUpdate=!0},tokyo.header3d.init(),tokyo.header3d.renderLoop();new tokyo.header3d.Karesansui,new tokyo.header3d.Logo,new tokyo.header3d.Text(["MEETUP","TOKYO"])}();